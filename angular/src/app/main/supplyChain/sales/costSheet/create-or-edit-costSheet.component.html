<div bsModal #createOrEditModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="createOrEditModal" aria-hidden="true" [config]="{backdrop: 'static'}">
    <div class="modal-dialog modal-xl custom_model_width">
        <div class="modal-content">
            <form *ngIf="active" #Form="ngForm" novalidate (ngSubmit)="save()" autocomplete="off" _ngcontent-bmt-c20 >
                <div class="modal-header">
                    <h4 class="modal-title">
                       
                        <span *ngIf="SaleQutationH.id">{{l("EditOECSD")}}</span>
						<span *ngIf="!SaleQutationH.id">{{l("CreateNewOECSD")}}</span>
				
                    </h4>
                    <button type="button" class="close" (click)="close()" aria-label="Close" [disabled]="saving">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body form-group">
                  <div col-md-12>
                    <div class="row">
                        <div class="m-form__group col-md-2">
                            <label for="locId">{{l("Loc")}}</label>
                            <div class="input-group">
                                <input class="form-control form-control-sm" id="locId" name="locId" disabled
                                    [(ngModel)]="SaleQutationH.locID" type="text" required />
                                <div class="input-group-append" *ngIf="LocCheckVal">
                                    <button class="btn btn-primary btn-sm" (click)="openlookUpModal()" type="button"><i
                                            class="fa fa-search"></i>
                                        {{l("Pick")}}</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 ">
                            <label for="locDesc">{{l("Desc")}}</label>
                            <input class="form-control form-control-sm" id="fromLocDesc" name="locDesc" disabled
                                [(ngModel)]="locDesc" type="text"/>
                        </div>
                        <div class="col-md-1">
                            <label for="docNo">{{l("DocNo")}}</label>
                            <input type="text" id="docNo" class="form-control form-control-sm"
                                [(ngModel)]="SaleQutationH.docNo" name="priceList" maxlength="10" required disabled />
                        </div>
                        <div class="col-md-2">
                            <label for="docDate">{{l("DocDate")}}</label>
                                <input type="text" min="1" id="docDate" [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" 
                                bsDatepicker class="form-control form-control-sm" [(ngModel)]="this.SaleQutationH.docDate"
                                 name="docDate" [disabled]="checkedval" />
                        </div>
                        <div class="col-md-2">
                            <label for="mdocNo">{{l("ManualDoc")}}</label>
                            <input type="text" id="mdocNo" class="form-control form-control-sm"
                                [(ngModel)]="SaleQutationH.mDocNo" name="mdocNo" maxlength="10" required  />
                        </div>
                        <div class="col-md-2">
                            <label for="mDocDate">{{l("ManualDate")}}</label>
                                <input type="text" min="1" id="mDocDate" [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" 
                                bsDatepicker class="form-control form-control-sm" [(ngModel)]="this.SaleQutationH.mDocDate"
                                 name="mDocDate"   />
                        </div>
                    </div>
                  
                    <div class="row">
    <div class="m-form__group col-md-3">
        <label for="SaleEntry_typeID">{{l("TransactionTypes")}}<span
                class="require-field">*</span></label>
        <div class="input-group">
            <input type="text" id="SaleEntry_typeID" class="form-control form-control-sm"
                [(ngModel)]="SaleQutationH.typeID" name="typeID" required disabled />
            <div class="input-group-append" >
                <button class="btn btn-primary blue btn-sm" (click)="openSelectTransactionModal()"
                    type="button"><i class="fa fa-search"></i> {{l("Pick")}}</button>
            </div>
            <div class="input-group-prepend" >
                <button class="btn btn-danger btn-icon btn-sm" type="button"
                    (click)="setTransactionIDNull()"><i class="fa fa-times"></i></button>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <label for="TypeDesc">{{l("")}}&nbsp;</label>
        <input class="form-control form-control-sm" id="TypeDesc" name="TypeDesc"
            [(ngModel)]="typeDesc" type="text" disabled >
    </div>
    <div class="col-md-3">
        <label for="SaleEntry_CustomerID">{{l("CustomerID")}}<span
                class="require-field">*</span></label>
        <div class="input-group">
            <input type="number" id="SaleEntry_CustomerID" class="form-control form-control-sm"
                [(ngModel)]="SaleQutationH.custID" name="CustID" disabled required />
            <div class="input-group-append">
                <button class="btn btn-primary blue btn-sm" (click)="openSelectCustomerModal()"
                    type="button"><i class="fa fa-search"></i> {{l("Pick")}}</button>
            </div>
            <div class="input-group-prepend">
                <button class="btn btn-danger btn-icon btn-sm" type="button"
                    (click)="setCustomerIDNull()"><i class="fa fa-times"></i></button>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <label for="CustomerName">{{l("")}}&nbsp;</label>
        <input class="form-control form-control-sm" id="CustomerName" name="CustomerName"
            [(ngModel)]="customerName" type="text" disabled >
    </div>
                    </div>
                    <div class="row">
                      
                        <!-- <div class="col-sm-3 ">
                            <label for="chAccountID" >{{l("ChAccountID")}}</label>
                            <div class="input-group">
                                <input class="form-control form-control-sm" id="chAccountID" name="chAccountID"
                                    [(ngModel)]="SaleQutationH.salesCtrlAcc" type="text" disabled >
                                <div class="input-group-append">
                                    <button class="btn btn-primary blue btn-sm btn-pick" (click)="openSelectChartofACModal('chAccountID')"
                                        type="button"><i class="fa fa-search"></i> {{l("Pick")}}</button>
                                </div>
                                <div class="input-group-prepend" hidden>
                                    <button class="btn btn-danger btn-icon" type="button" (click)="setCAIdNull()"><i
                                            class="fa fa-times"></i></button>
                                </div>
                            </div>
                        </div> -->
                        
                        <!-- <div class="col-sm-3  ">
                            <label for="Description" >{{l("Description")}}</label>
                            <input type="text" disabled  class="form-control form-control-sm" id="chAccountIDDesc"
                                name="chAccountIDDesc" [(ngModel)]="chAccountIDDesc" />
                        </div> -->
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="fromLocDesc">{{l("Narration")}}</label>
                            <input class="form-control form-control-sm" id="narration" name="narration"
                                [(ngModel)]="SaleQutationH.narration" type="text" maxlength="100"/>
                        </div>
						<div class="form-group m-form__group col-md-4 col-xs-12">
							<label for="SaleReturn_SaleNo">{{l("SaleNo")}}</label>
							<div class="input-group">  
								<input type="number" min="1" id="SaleReturn_SaleNo" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.saleDoc" name="SaleNo" />
								<div class="input-group-append">
									<button class="btn btn-primary blue btn-sm" (click)="openSelectSaleNoModal()" type="button"><i class="fa fa-search"></i> {{l("Pick")}}</button>
								</div><div class="input-group-prepend">
									<button class="btn btn-danger btn-icon btn-sm" type="button" (click)="setSaleNoNull()"><i class="fa fa-times"></i></button>
								</div>
							</div>
						</div>
						<div class="form-group col-md-2">
							<button class="btn btn-primary green btn-sm  col-md-8" style="margin-top: 25px;" *ngIf="permission.isGranted('Pages.OEQH.Edit')" (click)="getSaleNoRecord()" type="button"><i class="fa fa-search"></i> {{l("Filter")}}</button>
						</div>
                    </div>
					<div class="row">
						<div class="col-md-3">
							<label for="SaleEntry_BasicStyle">{{l("Basic Style")}}</label>
							<input type="text" id="SaleEntry_BasicStyle" class="form-control form-control-sm"
								[(ngModel)]="SaleQutationH.basicStyle" name="SaleEntry_BasicStyle" />
						</div>
						<div class="col-md-3">
							<label for="SaleEntry_License">{{l("License")}}</label>
							<input type="text" id="SaleEntry_License" class="form-control form-control-sm"
								[(ngModel)]="SaleQutationH.license" name="SaleEntry_License" />
						</div>
                        <div class="col-md-4">
							<label for="itemName">{{l("Item Name")}}</label>
							<input id="itemName" class="form-control form-control-sm"
								[(ngModel)]="SaleQutationH.itemName" readonly name="itemName" />
						</div>
                        <div class="col-md-2">
							<label for="orderQty">{{l("Order Qty")}}</label>
							<input id="orderQty" class="form-control form-control-sm"
								[(ngModel)]="SaleQutationH.orderQty" readonly name="orderQty" />
						</div>
					</div>
                  
                </div>
                    <button class="btn btn-primary mt-4 mb-3 btn-sm" type="button"
                        (click)="addRecordToGrid()">Add</button>
                    <button class="btn btn-primary mt-4 mb-3 btn-sm" type="button"
                        (click)="removeRecordFromGrid()">Remove</button>

                    <tabset >
                        <tab heading="Item Detail">
                            <fieldset>
                                <ag-grid-angular style="width: 100%; height: 200px;" class="ag-theme-balham"
                                    [rowData]="rowData" [columnDefs]="columnDefs" [animateRows]="true"
                                    [suppressDragLeaveHidesColumns]="true" [rowSelection]="rowSelection"
                                    [singleClickEdit]="true" (gridReady)="onGridReady($event)"
                                    (cellClicked)="cellClicked($event)"
                                    (cellValueChanged)="onCellValueChanged($event)"
                                    (cellEditingStarted)="cellEditingStarted($event)">
                                </ag-grid-angular>
                            </fieldset>
                        </tab>
                        <tab heading="Overheads">
							<div class="row col-sm-12">
                                <div class="col-sm-2">
									<label for="commRate" >{{l("Commission Rate (%)")}}</label>
									<input type="number" id="commRate" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.commRate" (keyup)="taxCalculation()" name="commRate" />
								</div>
								<div class="col-sm-2">
									<label for="commAmt" >{{l("Commission Amount")}}</label>
									<input id="commAmt" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.commAmt" readonly name="commAmt" />
								</div>
                                <div class="col-sm-2">
									<label for="ohRate" >{{l("Over Head Rate (%)")}}</label>
									<input type="number" id="ohRate" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.ohRate" (keyup)="taxCalculation()" name="ohRate" />
								</div>
								<div class="col-sm-2">
									<label for="ohAmt" >{{l("Over Head Amount")}}</label>
									<input id="ohAmt" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.ohAmt" readonly name="ohAmt" />
								</div>
                                <div class="col-sm-2">
									<label for="taxesRate" >{{l("Taxes Rate (%)")}}</label>
									<input type="number" id="taxesRate" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.taxRate" (keyup)="taxCalculation()" name="taxesRate" />
								</div>
								<div class="col-sm-2">
									<label for="taxesAmount" >{{l("Taxes Amount")}}</label>
									<input id="taxesAmount" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.taxAmt" readonly name="taxesAmount" />
								</div>
							</div>
                            <div class="row col-sm-12">
								<div class="col-sm-2">
									<label for="totalCost" >{{l("Total Cost")}}</label>
									<input id="totalCost" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.totalCost" readonly name="totalCost" />
								</div>
                                <div class="col-sm-2">
									<label for="profRate" >{{l("Profit Rate (%)")}}</label>
									<input type="number" id="profRate" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.profRate" (keyup)="taxCalculation()" name="profRate" />
								</div>
								<div class="col-sm-2">
									<label for="profAmt" >{{l("Profit Amount")}}</label>
									<input id="profAmt" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.profAmt" readonly name="profAmt" />
								</div>
                                <div class="col-sm-2">
									<label for="salePrice" >{{l("Sale Price")}}</label>
									<input id="salePrice" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.salePrice" readonly name="salePrice" />
								</div>
                                <div class="col-sm-2">
									<label for="costPP" >{{l("Cost Per Piece")}}</label>
									<input id="costPP" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.costPP" readonly name="costPP" />
								</div>
								<div class="col-sm-2">
									<label for="salePP" >{{l("Sale Per Piece")}}</label>
									<input id="salePP" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.salePP" readonly name="salePP" />
								</div>
							</div>
                            <div class="row col-sm-12">
                                <div class="form-group m-form__group col-md-2"   >
                                    <label for="GLINVHeader_CurrencyId">{{l("Currency")}}<span class="require-field">*</span></label>
                                    <div class="input-group">
                                        <input type="text" id="GLINVHeader_CurrencyId" class="form-control form-control-sm" [(ngModel)]="curID" name="CurID" readonly/>
                                        <div class="input-group-append">
                                            <button class="btn btn-primary blue btn-sm" (click)="openSelectCurrencyRateModal()" type="button"><i class="fa fa-search"></i> {{l("Pick")}}</button>
                                        </div> <div class="input-group-prepend">
                                            <button class="btn btn-danger btn-icon btn-sm" type="button" (click)="setCurrencyRateIdNull()"><i class="fa fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
								<div class="col-sm-2">
									<label for="" >{{l("Sale US$")}}</label>
									<input type="number" id="usRate" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.usRate" readonly name="usRate" />
								</div>
                                <div class="col-sm-2">
									<label for="saleUS" >{{l("Sale US$")}}</label>
									<input type="number" id="saleUS" class="form-control form-control-sm" [(ngModel)]="SaleQutationH.saleUS" readonly name="saleUS" />
								</div>
							</div>
                        </tab>
                        <!-- <tab heading="Terms">
                            <div class="col-sm-12  ">
                                <label for="noteText" >{{l("Note Text")}}</label>
                                <textarea type="text" class="form-control form-control-sm" id="noteText"
                                    name="noteText" [(ngModel)]="SaleQutationH.noteText" ></textarea>
                            </div>
                            <div class="col-sm-12  ">
                                <label for="payTerms" >{{l("Pay Terms")}}</label>
                                <textarea type="text"   class="form-control form-control-sm" id="payTerms"
                                    name="chAccountIDDesca" [(ngModel)]="SaleQutationH.payTerms" ></textarea>
                            </div>
                            <div class="col-sm-12  ">
                                <label for="delvTerms" >{{l("Delievery Terms")}}</label>
                                <textarea type="text"   class="form-control form-control-sm" id="delvTerms"
                                    name="chAccountIDDescw" [(ngModel)]="SaleQutationH.delvTerms" ></textarea>
                            </div>
                            <div class="col-sm-12  ">
                                <label for="validityTerms" >{{l("Validity Terms")}}</label>
                                <textarea type="text"   class="form-control form-control-sm" id="validityTerms"
                                    name="chAccountIDDescw" [(ngModel)]="SaleQutationH.validityTerms" ></textarea>
                                    
                            </div>
                        </tab>  -->
                       
                         
                    </tabset>

                    <div class="form-group col-md-2">
                        <label for="PurchaseOrders_VenderTax">{{l("Net Amount")}}<span
                                class="require-field">*</span></label>
                        <input type="number" id="PurchaseOrders_VenderTax"
                            class="form-control form-control-sm" [(ngModel)]="SaleQutationH.directCost" name="VenderTax124"
                            readonly />
                    </div>

                </div>
                <div class="modal-footer">
                    <button [disabled]="saving" type="button" class="btn btn-default"
                        (click)="close()">{{l("Cancel")}}</button>
                    <button type="submit" class="btn btn-primary blue" (click)="save()" *ngIf="!this.isButtonVisible" [disabled]="!formValid "
                        [buttonBusy]="saving" [busyText]="l('SavingWithThreeDot')"><i class="fa fa-save"></i>
                        <span>{{l("Save")}}</span></button>
                        <button type="button" class="btn btn-primary blue" *ngIf="this.SaleQutationH.id && !this.SaleQutationH.approved"
						[buttonBusy]="saving" [busyText]="l('SavingWithThreeDot')" (click)="approveDoc(this.SaleQutationH.docNo,'Approve',true)"  ><i class="fa fa-save"></i>
						Approved</button>
						<button type="button" class="btn btn-primary blue" *ngIf="this.SaleQutationH.id && this.SaleQutationH.approved"
						[buttonBusy]="saving" [busyText]="l('SavingWithThreeDot')" (click)="approveDoc(this.SaleQutationH.docNo,'UnApproval',false)"  ><i class="fa fa-save"></i>
						UnApproved</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- <InventoryGlLinkLookupTableModal #InventoryGlLinkLookupTableModal (modalSave)="getLookUpData()">
</InventoryGlLinkLookupTableModal>
<ItemPricingLookupTableModal #ItemPricingLookupTableModal (modalSave)="getLookUpData()"></ItemPricingLookupTableModal> -->
<financeLookupTableModal #FinanceLookupTableModal (modalSave)="getLookUpData()"></financeLookupTableModal>
<inventoryLookupTableModal #inventoryLookupTableModal (modalSave)="getNewInventoryModal()"></inventoryLookupTableModal>
<commonServiceLookupTableModal #CommonServiceLookupTableModal (modalSave)="getNewCommonServiceModal()">
</commonServiceLookupTableModal>
<salesLookupTableModal #SalesLookupTableModal (modalSave)="getNewSaleNo()"></salesLookupTableModal>
